<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>LÖVE Cookbook | String patterns</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>String patterns</title>
<meta name="title" content="String patterns">
<meta name="author" content="Sheepolution">
<meta name="description" content="With string patterns (manual) we can search for a string in a more complex way. For example, let's say we're not searching for a specific character, but any uppercase letter. We can do this with string patterns">
<meta name="generator" content="eleventy">
<meta property="og:type" content="website">
<meta property="og:url" content="https://diminim.github.io/love-cookbook/guides/lua-intermediate/string-patterns/">
<meta property="og:locale" content="en_US">
<meta property="og:title" content="String patterns">
<meta property="og:description" content="With string patterns (manual) we can search for a string in a more complex way. For example, let's say we're not searching for a specific character, but any uppercase letter. We can do this with string patterns">
<meta property="og:image" content="https://diminim.github.io/love-cookbook/assets/logo.png">
<meta property="og:image:alt" content="LÖVE Cookbook">
<meta name="twitter:card" content="summary">
<meta name="twitter:url" content="https://diminim.github.io/love-cookbook/guides/lua-intermediate/string-patterns/">
<meta name="twitter:title" content="String patterns">
<meta name="twitter:description" content="With string patterns (manual) we can search for a string in a more complex way. For example, let's say we're not searching for a specific character, but any uppercase letter. We can do this with string patterns">
<meta name="twitter:image" content="https://diminim.github.io/love-cookbook/assets/logo.png">
<meta name="twitter:image:alt" content="LÖVE Cookbook">
<link rel="canonical" href="https://diminim.github.io/love-cookbook/guides/lua-intermediate/string-patterns/">

    <script src="/love-cookbook/assets/js/codeblock.js"></script>
    <script src="/love-cookbook/assets/js/hover_preview.js"></script>

    <link rel="stylesheet" href="/love-cookbook/assets/styles/fonts.css">
    <link rel="stylesheet" href="/love-cookbook/assets/styles/main.css">
    <link rel="stylesheet" href="/love-cookbook/assets/styles/prism.css">
    <link rel="stylesheet" href="/love-cookbook/assets/styles/markdown.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mali:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="sidebar">
      <header>
        <a href="/love-cookbook/">
            <div class="logo">
                <img class="logo-unhover-img" src="/love-cookbook/assets/logo.png">
                <img class="logo-hover-img" src="/love-cookbook/assets/logo_hover.png">
            </div>

            <h1>LÖVE Cookbook</h1>
        </a>
      </header>

      <nav class="table-of-contents">
        <ul class="chapters"><li class="group-header"><ul class="guides"><li><a class="" href="/love-cookbook/guides/getting-started/">Getting started</a>
                  </li></ul>

            </li><li class="group-header">Installation<ul class="guides"><li><a class="" href="/love-cookbook/guides/installation/love/">LÖVE</a>
                  </li><li><a class="" href="/love-cookbook/guides/installation/vscode/">VSCode</a>
                  </li><li><a class="" href="/love-cookbook/guides/installation/neovim/">Neovim</a>
                  </li></ul>

            </li><li class="group-header">Lua Basics<ul class="guides"><li><a class="" href="/love-cookbook/guides/lua-basics/lua/">Lua</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-basics/variables/">Variables</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-basics/functions/">Functions</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-basics/if-statements/">If-statements</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-basics/tables/">Tables and for-loops</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-basics/recap/">Recap</a>
                  </li></ul>

            </li><li class="group-header">Lua Intermediate<ul class="guides"><li><a class="" href="/love-cookbook/guides/lua-intermediate/require/">Require</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-intermediate/scope/">Scope</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-intermediate/modulo/">Modulo</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-intermediate/nested-for-loops/">Nested for-loops</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-intermediate/standard-library/">Standard library</a>
                  </li><li><a class="active" href="/love-cookbook/guides/lua-intermediate/string-patterns/">String patterns</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-intermediate/ternary-operators/">Ternary operators</a>
                  </li><li><a class="" href="/love-cookbook/guides/lua-intermediate/metatables/">Metatables</a>
                  </li></ul>

            </li><li class="group-header">LÖVE Basics<ul class="guides"><li><a class="" href="/love-cookbook/guides/love/drawing-image/">Drawing an image</a>
                  </li><li><a class="" href="/love-cookbook/guides/love/drawing-shapes/">Drawing shapes</a>
                  </li><li><a class="" href="/love-cookbook/guides/love/playing-audio/">Playing audio</a>
                  </li><li><a class="" href="/love-cookbook/guides/love/input/">Input</a>
                  </li><li><a class="" href="/love-cookbook/guides/love/filesystem/">Filesystem</a>
                  </li><li><a class="" href="/love-cookbook/guides/love/deltatime/">Deltatime</a>
                  </li><li><a class="" href="/love-cookbook/guides/love/reading-errors/">Reading errors</a>
                  </li></ul>

            </li><li class="group-header">Basics<ul class="guides"><li><a class="" href="/love-cookbook/guides/basic/aabb/">AABB</a>
                  </li><li><a class="" href="/love-cookbook/guides/basic/angle-and-distance/">Angle &amp; distance</a>
                  </li><li><a class="" href="/love-cookbook/guides/basic/tiles/">Tiles</a>
                  </li><li><a class="" href="/love-cookbook/guides/basic/animation/">Animation</a>
                  </li><li><a class="" href="/love-cookbook/guides/basic/saving-and-loading/">Saving &amp; loading</a>
                  </li><li><a class="" href="/love-cookbook/guides/basic/canvases/">Canvases</a>
                  </li><li><a class="" href="/love-cookbook/guides/basic/stencil-modes/">Stencil modes</a>
                  </li></ul>

            </li><li class="group-header">Intermediate<ul class="guides"><li><a class="" href="/love-cookbook/guides/intermediate/oop/">OOP</a>
                  </li><li><a class="" href="/love-cookbook/guides/intermediate/collision-resolving/">Collision resolution</a>
                  </li><li><a class="" href="/love-cookbook/guides/intermediate/stencil-states/">Stencil states</a>
                  </li><li><a class="" href="/love-cookbook/guides/intermediate/coroutines/">Coroutines</a>
                  </li><li><a class="" href="/love-cookbook/guides/intermediate/shaders/">Shaders</a>
                  </li><li><a class="" href="/love-cookbook/guides/intermediate/compute-shaders/">Compute Shaders</a>
                  </li><li><a class="" href="/love-cookbook/guides/intermediate/box-blur/">Box Blur</a>
                  </li><li><a class="" href="/love-cookbook/guides/intermediate/outlines/">Outlines</a>
                  </li><li><a class="" href="/love-cookbook/guides/intermediate/palette/">Palette</a>
                  </li><li><a class="" href="/love-cookbook/guides/intermediate/pixelation/">Pixelation</a>
                  </li></ul>

            </li><li class="group-header">Advanced<ul class="guides"><li><a class="" href="/love-cookbook/guides/advanced/physics/">Physics</a>
                  </li><li><a class="" href="/love-cookbook/guides/advanced/threads/">Threads</a>
                  </li></ul>

            </li></ul>

      </nav>
    </div>

    <main>
      <article class="guide">
        
<h1 class="title">String patterns</h1>

<p>With <strong>string patterns</strong> (<a href="https://www.lua.org/manual/5.1/manual.html#5.4.1">manual</a>) we can search for a string in a more complex way. For example, let's say we're not searching for a specific character, but any uppercase letter. We can do this with <ins>string patterns</ins></p>
<p>To demonstrate string patterns, we will use <code>string.match</code>. This returns the substring that is matching our pattern.</p>
<pre><code class="language-lua"><span data-attrs=""></span><span class="token keyword">local</span> fruit <span class="token operator">=</span> <span class="token string">"apPle"</span>
<span class="token function">print</span><span class="token punctuation">(</span>fruit<span class="token punctuation">:</span>match<span class="token string">"[A-Z]"</span><span class="token punctuation">)</span> <span class="token comment">-- Output: P</span>
</code></pre>
<p>We can use square brackets <code>[]</code> to denote a <ins>set</ins>. With <code>A-Z</code> we cover all uppercase letters of the alphabet. So the pattern says: Find me a character that is in this set of all uppercase letters.</p>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p>String patterns is similar to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_expressions">regular expression</a>, but the former is more limited. If they would have added regular expression, then Lua's code would have doubled in size.</p>
</div>
<p>But we can write it even shorter:</p>
<pre><code class="language-lua"><span data-attrs=""></span><span class="token keyword">local</span> fruit <span class="token operator">=</span> <span class="token string">"apPle"</span>
<span class="token function">print</span><span class="token punctuation">(</span>fruit<span class="token punctuation">:</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"%u"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- Output: P</span>
</code></pre>
<p><code>%u</code> is what is called a <strong>character class</strong>. As you can see <a href="https://www.lua.org/manual/5.1/manual.html#5.4.1">here</a> there are a bunch of them. <code>%u</code> represents all uppercase letters.</p>
<p>If, for whatever reason, we want to search for the actual string <code>%u</code> instead of the character class it represents, we can escape it by placing another <code>%</code> in front.</p>
<pre><code class="language-lua"><span data-attrs=""></span><span class="token keyword">local</span> fruit <span class="token operator">=</span> <span class="token string">"ap%uple"</span>
<span class="token function">print</span><span class="token punctuation">(</span>fruit<span class="token punctuation">:</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"%%u"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- Output: %u</span>
</code></pre>
<p>If we want to search for more than one character, we can use <code>+</code>. We can use a dot <code>.</code> to represent any character.</p>
<p>In the code below we search for a string that starts with an uppercase letter, is then followed by any characters, and ends with an uppercase letter.</p>
<pre><code class="language-lua"><span data-attrs=""></span><span class="token keyword">local</span> message <span class="token operator">=</span> <span class="token string">"Hello WORLD how ARE You?"</span>
<span class="token function">print</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"%u.+%u"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- Output: Hello WORLD how ARE Y</span>
</code></pre>
<p>The <code>+</code> is one of four characters with which we can control how many characters we are looking for.</p>
<ul>
<li><code>+</code> — One or more characters (greedy)</li>
<li><code>*</code> — Zero or more characters (greedy)</li>
<li><code>-</code> — Zero or more characters (non-greedy)</li>
<li><code>?</code> — Zero or one character</li>
</ul>
<p><ins>Greedy</ins> and <ins>non-greedy</ins> refer whether how fast the pattern is satisfied. Notice how our output went all the way to the last <code>&quot;Y&quot;</code> of <code>&quot;You&quot;</code>. The substring <code>&quot;Hello W&quot;</code> satisfies our conditions of starting and ending with an uppercase letter, but the <code>+</code> continues the search up till the very last uppercase letter it could find. We get the shorter string if we use a <code>-</code> instead.</p>
<pre><code class="language-lua"><span data-attrs=""></span><span class="token keyword">local</span> message <span class="token operator">=</span> <span class="token string">"Hello WORLD how ARE You?"</span>
<span class="token function">print</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"%u.-%u"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- Output: Hello W</span>
</code></pre>
<h2 id="capturing" tabindex="-1">Capturing <a class="anchor" href="#capturing">#</a></h2>
<p>But what if we don't care about the uppercase letters? Yes, the text we are looking for is surrounded by uppercase letters, but we only care about the characters in-between. For this, we can use <strong>capturing</strong>.</p>
<p>We can create a capture with parentheses <code>()</code>. Let's capture the characters in-between the uppercase letters.</p>
<pre><code class="language-lua"><span data-attrs=""></span><span class="token keyword">local</span> message <span class="token operator">=</span> <span class="token string">"Hello WORLD how ARE You?"</span>
<span class="token function">print</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">"%u(.-)%u"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- Output: ello</span>
</code></pre>
<h2 id="gsub" tabindex="-1">gsub <a class="anchor" href="#gsub">#</a></h2>
<p>By using the power of <ins>string patterns</ins>, we can use the full potential of <code>string.gsub</code>. For example, instead of providing a replacement string, we can provide a <ins>table</ins>.</p>
<pre><code class="language-lua"><span data-attrs=""></span><span class="token keyword">local</span> about_me <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">-- This is how you assign a key with special</span>
    <span class="token comment">-- characters in the creation of the table.</span>
    <span class="token comment">-- You surround the string with square brackets.</span>
    <span class="token punctuation">[</span><span class="token string">"{animal}"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"whales"</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">"{fruit}"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"apples"</span>
<span class="token punctuation">}</span>
<span class="token keyword">local</span> message <span class="token operator">=</span> <span class="token string">"I like {animal} and {fruit}."</span>

<span class="token function">print</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span><span class="token function">gsub</span><span class="token punctuation">(</span><span class="token string">"{.-}"</span><span class="token punctuation">,</span> about_me<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- Output: I like whales and apples.</span>
</code></pre>
<p>By using a table, <code>gsub</code> searches for keys that match the substrings it found, and uses the values as the replacement for the string.</p>
<div class="markdown-alert markdown-alert-note"><p class="markdown-alert-title"><svg class="octicon octicon-info mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Note</p><p>This is another good example of where the difference between <code>+</code> and <code>-</code> is important. Had we used <code>+</code>, it would have matched with <code>&quot;{animal} and {fruit}&quot;</code>, as that is the longest string that opens and closes with <code>{}</code>.</p>
</div>
<p>But what if we don't simply want to replace the string that we find? For example, what if we want to reverse each word individually? We can use <code>%a+</code> to search for each word (<code>%a</code> represents all letters). Then instead of a replacement string, we're going to use a function, a <a href="../../lua-basics/functions#callbacks" data-preview="../../lua-basics/functions#callbacks">callback</a>. <code>gsub</code> will feed the function all the matches it could find, and the value we return is what that match will be replaced with.</p>
<pre><code class="language-lua"><span data-attrs=""></span><span class="token keyword">local</span> message <span class="token operator">=</span> <span class="token string">"Hello world how are you?"</span>
<span class="token function">print</span><span class="token punctuation">(</span>message<span class="token punctuation">:</span><span class="token function">gsub</span><span class="token punctuation">(</span><span class="token string">"%a+"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token keyword">return</span> str<span class="token punctuation">:</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p><code>gsub</code> can also be useful if we want to extract information from a string. Let's say we want to read all the numbers in a string and put them in a table.</p>
<pre><code class="language-lua"><span data-attrs=""></span><span class="token keyword">local</span> numbers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">local</span> message <span class="token operator">=</span> <span class="token string">"A s2tr7ing w39ith hi6dden nu8mbe1rs!"</span>
message<span class="token punctuation">:</span><span class="token function">gsub</span><span class="token punctuation">(</span><span class="token string">"%d+"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
    table<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>numbers<span class="token punctuation">,</span> <span class="token function">tonumber</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>

<span class="token function">print</span><span class="token punctuation">(</span><span class="token function">unpack</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">-- Output: 2, 7, 39, 6, 8, 1</span>
</code></pre>
<p>We don't return any value, because we don't care about modifying the string (besides, we're not printing the return value, or assigning it to a variable). Though if we wanted to remove the numbers, we could have returned an empty string <code>&quot;&quot;</code>.</p>


<footer class="guide-footer">
  <p></p>

  <p>By: 
  
      <em>Sheepolution</em>
    
  </p>
</footer>
      </article>
    </main>
    
  </body>
</html>